RELEASE NOTES FOR SLURM VERSION 24.05

IMPORTANT NOTES:
If using the slurmdbd (Slurm DataBase Daemon) you must update this first.

NOTE: If using a backup DBD you must start the primary first to do any
database conversion, the backup will not start until this has happened.

The 24.05 slurmdbd will work with Slurm daemons of version 23.02 and above.
You will not need to update all clusters at the same time, but it is very
important to update slurmdbd first and having it running before updating
any other clusters making use of it.

Slurm can be upgraded from version 23.02 or 23.11 to version 24.05 without loss
of jobs or other state information. Upgrading directly from an earlier version
of Slurm will result in loss of state information.

All SPANK plugins must be recompiled when upgrading from any Slurm version
prior to 24.05.

HIGHLIGHTS
==========
 -- Remove support for Cray XC ("cray_aries") systems.
 -- Federation - allow client command operation when slurmdbd is unavailable.
 -- burst_buffer/lua - Added two new hooks: slurm_bb_test_data_in and
    slurm_bb_test_data_out. The syntax and use of the new hooks are documented
    in etc/burst_buffer.lua.example. These are required to exist. slurmctld now
    checks on startup if the burst_buffer.lua script loads and contains all
    required hooks; slurmctld will exit with a fatal error if this is not
    successful. Added PollInterval to burst_buffer.conf. Removed the arbitrary
    limit of 512 copies of the script running simultaneously.
 -- Add QOS limit MaxTRESRunMinsPerAccount.
 -- Add QOS limit MaxTRESRunMinsPerUser.
 -- Add ELIGIBLE environment variable to jobcomp/script plugin.
 -- Always use the QOS name for SLURM_JOB_QOS environment variables.
    Previously the batch environment would use the description field,
    which was usually equivalent to the name.
 -- cgroup/v2 - Require dbus-1 version >= 1.11.16.

CONFIGURATION FILE CHANGES (see appropriate man page for details)
=====================================================================
 -- CoreSpecPlugin has been removed.
 -- Removed TopologyPlugin tree and dragonfly support from select/linear.
    If those topology plugins are desired please switch to select/cons_tres.
 -- Changed the default value for UnkillableStepTimeout to 60 seconds or five
    times the value of MessageTimeout, whichever is greater.
 -- An error log has been added if JobAcctGatherParams 'UsePss' or 'NoShare' are
    configured with a plugin other than jobacct_gather/linux. In such case these
    parameters are ignored.
 -- helpers.conf - Added Flags=rebootless parameter allowing feature changes
    without rebooting compute nodes.
 -- topology/block - Replaced the BlockLevels with BlockSizes in topology.conf.
 -- Add contain_spank option to SlurmdParameters. When set, spank_user_init(),
    spank_task_post_fork(), and spank_task_exit() will execute within the
    job_container/tmpfs plugin namespace.

COMMAND CHANGES (see man pages for details)
===========================================
 -- Add support for "elevenses" as an additional time specification.
 -- Add support for sbcast --preserve when job_container/tmpfs configured
    (previously documented as unsupported).
 -- scontrol - Add new subcommand 'power' for node power control.

API CHANGES
===========
 -- Removed ListIterator type from <slurm/slurm.h>.
 -- Removed slurm_xlate_job_id() from <slurm/slurm.h>

SLURMRESTD CHANGES
==================
 -- openapi/dbv0.0.38 and openapi/v0.0.38 plugins have been removed.
 -- openapi/dbv0.0.39 and openapi/v0.0.39 plugins have been tagged as
    deprecated to warn of their removal in the next release.
 -- Changed slurmrestd.service to only listen on TCP socket by default.
    Environments with existing drop-in units for the service may need
    further adjustments to work after upgrading.
 -- slurmrestd - Tagged `script` field as deprecated in
    'POST /slurm/v0.0.41/job/submit' in anticipation of removal in future
    OpenAPI plugin versions. Job submissions should set the `job.script` (or
    `jobs[0].script` for HetJobs) fields instead.

MPI/PMI2 CHANGES
================
 -- Jobs submitted with the SLURM_HOSTFILE environment variable set implies
    using an arbitrary distribution. Nevertheless, the logic used in PMI2 when
    generating their associated PMI_process_mapping values has been changed and
    will now be the same used for the plane distribution, as if "-m plane" were
    used. This has been changed because the original arbitrary distribution
    implementation did not account for multiple instances of the same host being
    present in SLURM_HOSTFILE, providing an incorrect process mapping in such
    case. This change also enables distributing tasks in blocks when using
    arbitrary distribution, which was not the case before. This only affects
    mpi/pmi2 plugin.
