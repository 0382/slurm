RELEASE NOTES FOR SLURM VERSION 18.08
26 October 2017

IMPORTANT NOTES:
THE MAXJOBID IS NOW 67,108,863. ANY PRE-EXISTING JOBS WILL CONTINUE TO RUN BUT
NEW JOB IDS WILL BE WITHIN THE NEW MAXJOBID RANGE. Adjust your configured
MaxJobID value as needed to eliminate any confusion.

If using the slurmdbd (Slurm DataBase Daemon) you must update this first.

NOTE: If using a backup DBD you must start the primary first to do any
database conversion, the backup will not start until this has happened.

The 18.08 slurmdbd will work with Slurm daemons of version 17.02 and above.
You will not need to update all clusters at the same time, but it is very
important to update slurmdbd first and having it running before updating
any other clusters making use of it.  No real harm will come from updating
your systems before the slurmdbd, but they will not talk to each other
until you do.  Also at least the first time running the slurmdbd you need to
make sure your my.cnf file has innodb_buffer_pool_size equal to at least 64M.
You can accomplish this by adding the line

innodb_buffer_pool_size=64M

under the [mysqld] reference in the my.cnf file and restarting the mysqld. The
buffer pool size must be smaller than the size of the MySQL tmpdir. This is
needed when converting large tables over to the new database schema.

Slurm can be upgraded from version 17.02 or 17.11 to version 18.08 without loss
of jobs or other state information. Upgrading directly from an earlier version
of Slurm will result in loss of state information.

If using SPANK plugins that use the Slurm APIs, they should be recompiled when
upgrading Slurm to a new major release.

NOTE: The slurm.spec file used to build RPM packages has been aggressively
      refactored, and some package names may now be different. Notably,
      the three daemons (slurmctld, slurmd/slurmstepd, slurmdbd) each
      have their own separate package with the binary and the appropriate
      systemd service file, which will be installed automatically (but
      not enabled).
      The slurm-plugins, slurm-munge, and slurm-lua package has been removed,
      and the contents moved in to the main slurm package.
      The slurm-sql package has been removed, and merged in with the slurm
      (job_comp_mysql.so) and slurm-slurmdbd (accounting_storage_mysql)
      packages.
      The example configuration files have been moved to slurm-example-configs.

NOTE: The slurmctld is now set to fatal if there are any problems with
      any state files.  To avoid this use the new '-i' flag.

NOTE: systemd services files are installed automatically, but not enabled.
      You will need to manually enable them on the appropriate systems:
      - Controller: systemctl enable slurmctld
      - Database: systemctl enable slurmdbd
      - Compute Nodes: systemctl enable slurmd

NOTE: If you are not using Munge, but are using the "service" scripts to
      start Slurm daemons, then you will need to remove this check from the
      etc/slurm*service scripts.

NOTE: If you are upgrading with any jobs from 14.03 or earlier
      (i.e. quick upgrade from 14.03 -> 15.08 -> 17.02) you will need
      to wait until after those jobs are gone before you upgrade to 17.02
      or 17.11 or 18.08.

NOTE: If you interact with any memory values in a job_submit plugin, you will
      need to test against NO_VAL64 instead of NO_VAL, and change your printf
      format as well.

NOTE: The SLURM_ID_HASH used for Cray systems has changed to fully use the
      entire 64 bits of the hash.  Previously the stepid was multiplied by
      10,000,000,000 to make it easy to read both the jobid as well as the
      stepid in the hash separated by at least a couple of zeros, but this
      lead to overflow on the hash with steps like the batch and extern step
      where they used all 32 bits to represent the step.  While the new method
      ruins the easy readability it fixes the more important overflow issue.
      This most likely will go unnoticed by most, just a note of the change.

NOTE: Starting in 17.11 the slurm commands and daemons dynamically link to
      libslurm.so instead of statically linking.  This dramatically reduces
      the footprint of Slurm.  If for some reason this creates issues with
      your build you can configure slurm with --without-shared-libslurm.

NOTE: Spank options handled in local and allocator contexts should be able to
      handle being called multiple times. An option could be set multiple times
      through environment variables and command line options. Environment
      variables are processed first.

NOTE: IBM BlueGene/Q and Cray/ALPS modes are deprecated and will be removed
      in an upcoming release. You must add the --enable-deprecated option to
      configure to build these targets.

NOTE: Built-in BLCR support is deprecated, no longer built automatically, and
      will be removed in an upcoming release. You must add --with-blcr and
      --enable-deprecated options to configure to build this plugin.

HIGHLIGHTS
==========

RPMBUILD CHANGES
================
 -- Components rearranged into obvious packages.
    - slurm - libraries and all commands.
    - slurmctld - daemon binary and service file for head node.
    - slurmd - daemon binary and service file for compute nodes.
    - slurmdbd - daemon binary and service file for database.

CONFIGURATION FILE CHANGES (see man appropriate man page for details)
=====================================================================

COMMAND CHANGES (see man pages for details)
===========================================

OTHER CHANGES
=============

API CHANGES
===========

Changed members of the following structs
========================================

Added members to the following struct definitions
=================================================

Added the following struct definitions
======================================

Removed members from the following struct definitions
=====================================================

Changed the following enums and #defines
========================================

Added the following API's
=========================

Changed the following API's
============================

Removed the following API's
===========================
